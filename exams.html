<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nexus Admin - Exams & Grading</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
    <!-- Google Fonts (Inter) -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <!-- ApexCharts -->
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

    <style>
        :root {
            --bg-dark: #111827;
            --bg-sidebar: #1f2937;
            --bg-card: #1f2937;
            --text-main: #ffffff;
            --text-muted: #9ca3af;
            --accent-purple: #6366f1;
            --accent-blue: #3b82f6;
            --border-color: #374151;

            --accent-green: #10b981;
            --accent-orange: #f59e0b;
            --accent-red: #ef4444;
            --accent-info: #0ea5e9;

            --sidebar-width: 260px;
            --sidebar-width-collapsed: 90px;
            --sidebar-left-pos: 16px;
            --sidebar-padding-x: 16px;

            --anim-speed: 0.3s;
            --scrollbar-thumb: #4b5563;
            --scrollbar-track: transparent;
            --input-bg: rgba(255, 255, 255, 0.05);
            --icon-box-light: rgba(0, 0, 0, 0.03);
        }

        body.light-mode {
            --bg-dark: #f3f4f6;
            --bg-sidebar: #ffffff;
            --bg-card: #ffffff;
            --text-main: #1f2937;
            --text-muted: #6b7280;
            --border-color: #e5e7eb;
            --input-bg: #ffffff;
            --scrollbar-thumb: #cbd5e1;
        }

        body {
            font-family: "Inter", sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-main);
            overflow-x: hidden;
            transition: background-color 0.3s ease;
            display: flex;
            min-height: 100vh;
            flex-direction: column;
        }

        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }

        ::-webkit-scrollbar-thumb {
            background-color: var(--scrollbar-thumb);
            border-radius: 10px;
        }

        .text-muted {
            color: var(--text-muted) !important;
        }

        a {
            text-decoration: none;
        }

        /* --- GLOBAL: SIDEBAR LAYOUT --- */
        .mobile-menu-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 999;
            width: 44px;
            height: 44px;
            border-radius: 12px;
            display: none;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #ec4899 0%, #8b5cf6 100%);
            border: none;
            color: white;
            box-shadow: 0 4px 15px rgba(236, 72, 153, 0.4);
            transition: all 0.2s;
        }

        .sidebar-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 998;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
            backdrop-filter: blur(2px);
        }

        .sidebar-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .sidebar {
            width: var(--sidebar-width);
            background-color: var(--bg-sidebar);
            height: calc(100vh - 32px);
            position: fixed;
            top: 16px;
            left: var(--sidebar-left-pos);
            padding: 24px 0 24px var(--sidebar-padding-x);
            border-radius: 24px;
            border: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            z-index: 1000;
            box-shadow: 5px 5px 20px rgba(0, 0, 0, 0.15);
            transition: all 0.3s ease;
            overflow: visible;
        }

        .sidebar-header {
            margin-bottom: 20px;
            padding-left: 10px;
            display: flex;
            align-items: center;
            min-height: 40px;
            flex-shrink: 0;
            position: relative;
        }

        .brand-logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 700;
            font-size: 1.2rem;
            color: var(--text-main);
            width: 100%;
            transition: all 0.3s ease;
        }

        .brand-logo img {
            height: 32px;
            width: auto;
            object-fit: contain;
        }

        .sidebar-divider {
            height: 3px;
            background-color: rgba(255, 255, 255, 0.15);
            margin: 0 -16px 20px;
            flex-shrink: 0;
            border-radius: 2px;
        }

        .nav-scrollable {
            flex-grow: 1;
            overflow-y: auto;
            overflow-x: hidden;
            min-height: 0;
            display: flex;
            flex-direction: column;
            padding-right: 4px;
            margin-bottom: 20px;
        }

        .nav-category {
            font-size: 0.68rem;
            padding: 0 16px;
            margin: 28px 0 12px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1.4px;
            color: #64748b;
            position: relative;
        }

        .nav-category::before {
            content: "";
            position: absolute;
            left: 16px;
            bottom: -5px;
            width: 18px;
            height: 2px;
            background: #475569;
            opacity: 0.4;
            border-radius: 100px;
        }

        /* MENU ITEMS STYLING */
        .nav-link {
            color: var(--text-muted);
            padding: 10px 12px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 4px;
            margin-right: 12px;
            transition: all 0.2s;
            font-weight: 500;
            white-space: nowrap;
            flex-shrink: 0;
            position: relative;
            border: 1px solid transparent;
        }

        .nav-link:hover {
            color: var(--text-main);
            background-color: rgba(255, 255, 255, 0.03);
        }

        .nav-link i:not(.arrow-icon) {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: rgba(255, 255, 255, 0.03);
            border-radius: 10px;
            color: var(--text-muted);
            flex-shrink: 0;
            transition: all 0.3s;
        }

        .arrow-icon {
            margin-left: auto;
            font-size: 0.8rem;
            transition: transform 0.3s ease;
            color: var(--text-muted);
        }

        .nav-link.active:not([data-bs-toggle="collapse"]),
        .nav-link.active-btn:not([data-bs-toggle="collapse"]) {
            background: linear-gradient(135deg, #ec4899 0%, #8b5cf6 100%);
            color: white !important;
            box-shadow: 0 4px 10px rgba(236, 72, 153, 0.4);
            border-color: transparent;
        }

        .nav-link.active:not([data-bs-toggle="collapse"]) i:not(.arrow-icon),
        .nav-link.active-btn:not([data-bs-toggle="collapse"]) i:not(.arrow-icon) {
            color: white !important;
            background-color: rgba(255, 255, 255, 0.2) !important;
        }

        .nav-link[data-bs-toggle="collapse"][aria-expanded="true"],
        .nav-link[data-bs-toggle="collapse"].active {
            background: transparent !important;
            color: var(--text-main) !important;
            box-shadow: none !important;
        }

        .nav-link[data-bs-toggle="collapse"][aria-expanded="true"] i:not(.arrow-icon),
        .nav-link[data-bs-toggle="collapse"].active i:not(.arrow-icon) {
            background: linear-gradient(135deg, #ec4899 0%, #8b5cf6 100%) !important;
            color: white !important;
            box-shadow: 0 4px 12px rgba(236, 72, 153, 0.4);
        }

        .nav-link[data-bs-toggle="collapse"][aria-expanded="true"] .arrow-icon {
            transform: rotate(90deg);
            color: var(--text-main) !important;
        }

        .nav-submenu {
            padding-left: 0;
            list-style: none;
            margin: 0;
            display: flex;
            flex-direction: column;
            gap: 2px;
            padding-top: 4px;
            padding-bottom: 4px;
        }

        .nav-submenu .nav-link {
            padding-left: 50px;
            height: 40px;
            font-size: 0.85rem;
            margin: 0;
            margin-right: 12px;
            background: transparent !important;
            box-shadow: none !important;
            color: var(--text-muted) !important;
            transition: all 0.2s ease-in-out;
            opacity: 0.7;
        }

        .collapse.show .nav-submenu .nav-link {
            opacity: 1;
        }

        .nav-submenu .nav-link:hover {
            color: var(--text-main) !important;
            background-color: rgba(255, 255, 255, 0.05) !important;
            padding-left: 53px;
            opacity: 1;
        }

        .nav-submenu .nav-link.active {
            background: rgba(255, 255, 255, 0.05) !important;
            font-weight: 700;
            opacity: 1;
        }

        .nav-submenu .nav-link.active span {
            background: linear-gradient(135deg, #ec4899 0%, #8b5cf6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: inline-block;
        }

        .nav-submenu-divider {
            height: 1px;
            background: rgba(255, 255, 255, 0.08);
            margin: 8px 12px 8px 50px;
        }

        body.light-mode .nav-submenu-divider {
            background: rgba(0, 0, 0, 0.08);
        }

        .nav-submenu-label {
            font-size: 0.65rem;
            text-transform: uppercase;
            color: var(--text-muted);
            margin: 8px 0 4px 50px;
            font-weight: 700;
            letter-spacing: 0.5px;
            opacity: 0.7;
        }

        .profile-wrapper {
            margin-top: auto;
            width: 100%;
            padding: 0 16px 16px 0px;
            flex-shrink: 0;
            position: relative;
        }

        .user-profile-btn {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.08);
            padding: 8px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .user-profile-btn.dropdown-toggle::after {
            display: none !important;
        }

        .user-profile-btn:hover,
        .user-profile-btn[aria-expanded="true"] {
            background: rgba(255, 255, 255, 0.06);
            border-color: rgba(99, 102, 241, 0.5);
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
        }

        .user-profile-btn[aria-expanded="true"] .profile-chevron {
            transform: rotate(180deg);
            color: var(--text-main);
        }

        .avatar-container {
            position: relative;
            flex-shrink: 0;
        }

        .avatar-modern {
            width: 42px;
            height: 42px;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 1.1rem;
            box-shadow: 0 4px 10px rgba(99, 102, 241, 0.3);
        }

        .status-dot {
            position: absolute;
            bottom: -2px;
            right: -2px;
            width: 14px;
            height: 14px;
            background-color: var(--accent-green);
            border: 3px solid var(--bg-sidebar);
            border-radius: 50%;
            z-index: 2;
        }

        .status-dot.pulse {
            animation: statusPulse 2s infinite;
        }

        @keyframes statusPulse {
            0% {
                box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.4);
            }

            70% {
                box-shadow: 0 0 0 6px rgba(16, 185, 129, 0);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(16, 185, 129, 0);
            }
        }

        .user-info-modern {
            flex: 1;
            min-width: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .user-name-modern {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--text-main);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .user-role-modern {
            font-size: 0.75rem;
            color: var(--text-muted);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .profile-chevron {
            color: var(--text-muted);
            transition: transform 0.3s;
            font-size: 0.9rem;
        }

        .profile-dropdown-menu {
            position: absolute;
            bottom: 100% !important;
            left: 0;
            width: 100%;
            margin-bottom: 12px !important;
            padding: 8px;
            border-radius: 20px;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            box-shadow: 0 -10px 40px -10px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            background: rgba(31, 41, 55, 0.95);
            animation: slideUpFade 0.3s cubic-bezier(0.2, 0.8, 0.2, 1);
            transform: none !important;
        }

        body.light-mode .profile-dropdown-menu {
            background: rgba(255, 255, 255, 0.95);
        }

        @keyframes slideUpFade {
            from {
                opacity: 0;
                transform: translateY(10px) scale(0.95);
            }

            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .dropdown-header-modern {
            padding: 12px 16px 8px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            margin-bottom: 6px;
        }

        body.light-mode .dropdown-header-modern {
            border-bottom-color: rgba(0, 0, 0, 0.05);
        }

        .menu-label {
            font-size: 0.65rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-muted);
            font-weight: 700;
            margin-bottom: 4px;
        }

        .menu-user-email {
            font-size: 0.8rem;
            color: var(--text-main);
            opacity: 0.8;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .profile-menu-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 16px;
            border-radius: 12px;
            color: var(--text-muted);
            text-decoration: none;
            transition: all 0.2s;
            font-size: 0.9rem;
            font-weight: 500;
            margin-bottom: 2px;
        }

        .profile-menu-item:hover {
            background-color: rgba(255, 255, 255, 0.05);
            color: var(--text-main);
        }

        body.light-mode .profile-menu-item:hover {
            background-color: rgba(0, 0, 0, 0.05);
        }

        .profile-menu-item.danger-item:hover {
            background-color: rgba(239, 68, 68, 0.1);
            color: var(--accent-red);
        }

        .item-left {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .item-icon {
            font-size: 1.1rem;
        }

        .theme-switch-wrapper {
            display: flex;
            align-items: center;
        }

        .form-check-input.custom-switch {
            width: 36px;
            height: 20px;
            cursor: pointer;
            background-color: var(--border-color);
            border-color: transparent;
        }

        .form-check-input.custom-switch:checked {
            background-color: var(--accent-purple);
            border-color: transparent;
        }

        /* --- GLOBAL: COLLAPSE BUTTON --- */
        .sidebar-collapse-btn {
            position: absolute;
            top: 22px;
            right: -15px;
            width: 32px;
            height: 32px;
            background: var(--bg-sidebar);
            border: 1px solid var(--border-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-muted);
            cursor: pointer;
            z-index: 1001;
            box-shadow: 2px 2px 8px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }

        .sidebar-collapse-btn:hover {
            color: var(--accent-purple);
            border-color: var(--accent-purple);
            box-shadow: 2px 2px 12px rgba(99, 102, 241, 0.3);
        }

        /* --- GLOBAL: SIDEBAR COLLAPSED STATE --- */
        .sidebar.collapsed {
            width: var(--sidebar-width-collapsed);
            padding: 24px 12px;
        }

        .sidebar.collapsed .brand-logo {
            justify-content: center;
            padding-left: 0;
            width: 100%;
        }

        .sidebar.collapsed .logo-text,
        .sidebar.collapsed .nav-link span,
        .sidebar.collapsed .nav-category,
        .sidebar.collapsed .arrow-icon,
        .sidebar.collapsed .user-info,
        .sidebar.collapsed .user-info-modern,
        .sidebar.collapsed .profile-chevron {
            display: none;
        }

        .sidebar.collapsed .collapse {
            display: none !important;
        }

        .sidebar.collapsed .sidebar-header {
            padding-left: 0;
            justify-content: center;
        }

        .sidebar.collapsed .nav-link,
        .sidebar.collapsed .user-profile-btn {
            justify-content: center;
            padding: 8px;
            margin-right: 0;
        }

        .sidebar.collapsed .sidebar-collapse-btn i {
            transform: rotate(180deg);
        }

        /* --- GLOBAL: MAIN CONTENT WRAPPER --- */
        .main-content {
            margin-left: calc(var(--sidebar-left-pos) + var(--sidebar-width) + 24px);
            width: calc(100% - (var(--sidebar-left-pos) + var(--sidebar-width) + 24px));
            padding: 30px 30px 20px;
            transition: all 0.3s ease;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        body.sidebar-collapsed .main-content {
            margin-left: calc(var(--sidebar-left-pos) + var(--sidebar-width-collapsed) + 24px);
            width: calc(100% - (var(--sidebar-left-pos) + var(--sidebar-width-collapsed) + 24px));
        }

        .footer-dashboard {
            margin-top: auto;
            padding-top: 2rem;
            margin-bottom: 0.5rem;
            border-top: 1px solid var(--border-color);
        }

        .footer-link {
            color: var(--text-muted);
            transition: color 0.2s ease;
            text-decoration: none;
            font-size: 0.85rem;
        }

        .footer-link:hover {
            color: var(--accent-purple);
        }

        .top-navbar-standalone {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            gap: 16px;
            margin-bottom: 10px;
        }

        .search-standalone-box {
            position: relative;
            width: 300px;
            transition: width 0.3s ease;
        }

        .search-standalone-input {
            width: 100%;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 14px;
            padding: 12px 20px 12px 48px;
            color: var(--text-main);
        }

        .search-standalone-input:focus {
            outline: none;
            border-color: var(--accent-purple);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
        }

        .search-standalone-icon {
            position: absolute;
            left: 18px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--accent-purple);
        }

        .notification-wrapper {
            position: relative;
        }

        .notification-btn {
            width: 46px;
            height: 46px;
            border-radius: 14px;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            color: var(--text-muted);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }

        .notification-btn:hover,
        .notification-btn[aria-expanded="true"] {
            background: rgba(255, 255, 255, 0.05);
            color: var(--accent-purple);
            border-color: var(--accent-purple);
            transform: translateY(-1px);
        }

        body.light-mode .notification-btn:hover {
            background: rgba(0, 0, 0, 0.05);
        }

        .notification-dot-red {
            position: absolute;
            top: 10px;
            right: 12px;
            width: 8px;
            height: 8px;
            background-color: var(--accent-red);
            border-radius: 50%;
            z-index: 2;
            animation: notifPulse 1.5s infinite;
        }

        @keyframes notifPulse {
            0% {
                box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.4);
            }

            70% {
                box-shadow: 0 0 0 4px rgba(239, 68, 68, 0);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(239, 68, 68, 0);
            }
        }

        .notification-dropdown-menu {
            position: absolute;
            top: 100% !important;
            right: 0 !important;
            left: auto !important;
            margin-top: 12px !important;
            width: 320px;
            padding: 8px;
            border-radius: 20px;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            box-shadow: 0 15px 40px -10px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            background: rgba(31, 41, 55, 0.95);
            animation: slideDownFade 0.3s cubic-bezier(0.2, 0.8, 0.2, 1);
            transform: none !important;
        }

        body.light-mode .notification-dropdown-menu {
            background: rgba(255, 255, 255, 0.95);
        }

        @keyframes slideDownFade {
            from {
                opacity: 0;
                transform: translateY(-10px) scale(0.95);
            }

            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .notification-item {
            padding: 12px;
            border-radius: 12px;
            display: flex;
            gap: 12px;
            align-items: start;
            color: var(--text-muted);
            text-decoration: none;
            transition: background 0.2s;
            margin-bottom: 4px;
        }

        .notification-item:hover {
            background: rgba(255, 255, 255, 0.03);
            color: var(--text-main);
        }

        body.light-mode .notification-item:hover {
            background: rgba(0, 0, 0, 0.03);
        }

        .notif-icon-box {
            width: 36px;
            height: 36px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            font-size: 1rem;
        }

        .bg-soft-danger {
            background: rgba(239, 68, 68, 0.15);
            color: var(--accent-red);
        }

        .bg-soft-success {
            background: rgba(16, 185, 129, 0.15);
            color: var(--accent-green);
        }

        .bg-soft-info {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
        }

        .notif-content h6 {
            font-size: 0.85rem;
            margin-bottom: 2px;
            font-weight: 600;
            color: var(--text-main);
        }

        .notif-content p {
            font-size: 0.75rem;
            margin-bottom: 0;
            opacity: 0.8;
        }

        .notif-time {
            font-size: 0.7rem;
            opacity: 0.6;
            margin-top: 4px;
            display: block;
        }

        .floating-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            background: #6366f1;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            box-shadow: 0 4px 10px rgba(99, 102, 241, 0.5);
            cursor: pointer;
            z-index: 900;
        }

        .card-header-custom {
            border-bottom: 1px solid var(--border-color);
            margin: 0;
            padding: 20px 24px;
            background-color: rgba(0, 0, 0, 0.02);
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 16px 16px 0 0;
        }

        .widget-card {
            background-color: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 24px;
            position: relative;
            overflow: hidden;
            transition: 0.3s;
            height: 100%;
            color: var(--text-main);
        }

        .widget-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            border-color: var(--accent-purple);
        }

        /* DASHBOARD STYLES */
        .welcome-banner {
            background: linear-gradient(135deg, #4f46e5 0%, #9333ea 100%);
            border-radius: 24px;
            padding: 40px 30px;
            color: white;
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
        }

        .welcome-shape {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
        }

        .dash-stat-card {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .dash-icon-box {
            width: 60px;
            height: 60px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
        }

        .dash-trend-up {
            color: var(--accent-green);
            font-size: 0.85rem;
            font-weight: 600;
        }

        .dash-trend-down {
            color: var(--accent-red);
            font-size: 0.85rem;
            font-weight: 600;
        }

        .activity-feed {
            position: relative;
            padding-left: 20px;
            border-left: 2px solid var(--border-color);
        }

        .activity-item {
            position: relative;
            margin-bottom: 25px;
        }

        .activity-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--bg-card);
            border: 2px solid var(--accent-purple);
            position: absolute;
            left: -27px;
            top: 5px;
        }

        .table-dashboard {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
        }

        .table-dashboard th {
            padding: 15px;
            text-align: left;
            color: var(--text-muted);
            border-bottom: 1px solid var(--border-color);
            white-space: nowrap;
        }

        .table-dashboard td {
            padding: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            vertical-align: middle;
            color: var(--text-main);
            font-size: 0.9rem;
        }

        /* PAGE HEADER & BREADCRUMB */
        .active-page-header {
            padding: 30px;
            border-radius: 24px;
            background-color: var(--bg-card);
            position: relative;
            margin-bottom: 3.5rem;
            border: 2px solid transparent;
            background-image: linear-gradient(var(--bg-card), var(--bg-card)),
                linear-gradient(135deg, #ec4899 0%, #8b5cf6 50%, #3b82f6 100%);
            background-origin: border-box;
            background-clip: padding-box, border-box;
            box-shadow: 0 10px 40px -10px rgba(99, 102, 241, 0.15);
        }

        .page-title-large {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            font-weight: 800;
            background: linear-gradient(90deg,
                    var(--text-main) 0%,
                    var(--accent-purple) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: inline-block;
        }

        body.light-mode .page-title-large {
            background: none;
            -webkit-text-fill-color: var(--text-main);
            color: var(--text-main);
        }

        .header-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            border-radius: 20px;
            background: rgba(99, 102, 241, 0.1);
            color: var(--accent-purple);
            font-size: 0.75rem;
            font-weight: 700;
            border: 1px solid rgba(99, 102, 241, 0.2);
            white-space: nowrap;
        }

        .breadcrumb-modern {
            display: inline-flex;
            align-items: center;
            background-color: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 6px 16px;
            border-radius: 50px;
            gap: 8px;
            font-size: 0.85rem;
        }

        body.light-mode .breadcrumb-modern {
            background-color: rgba(0, 0, 0, 0.03);
            border-color: var(--border-color);
        }

        .breadcrumb-item-custom {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            color: var(--text-muted);
            font-weight: 500;
            text-decoration: none;
            transition: color 0.2s;
        }

        .breadcrumb-item-custom:hover {
            color: var(--accent-purple);
        }

        .breadcrumb-item-custom.active {
            color: var(--text-main);
            font-weight: 600;
            cursor: default;
        }

        .breadcrumb-home-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--accent-purple);
        }

        .breadcrumb-sep {
            font-size: 0.7rem;
            color: var(--text-muted);
            opacity: 0.6;
        }

        .section-label-custom {
            color: var(--text-main);
            opacity: 0.9;
            margin-bottom: 1.5rem;
            text-transform: uppercase;
            font-size: 0.85rem;
            font-weight: 700;
            margin-top: 1rem;
        }

        .section-title-modern {
            font-size: 1rem;
            font-weight: 700;
            color: var(--text-main);
            margin: 40px 0 20px;
            padding-left: 12px;
            border-left: 4px solid var(--accent-purple);
            letter-spacing: 0.5px;
            text-transform: uppercase;
            padding-bottom: 10px;
        }

        /* EXAM SPECIFIC STYLES */
        .exam-stat-card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 20px;
            padding: 24px;
            position: relative;
            overflow: hidden;
            height: 100%;
            transition: transform 0.2s;
        }

        .exam-stat-card:hover {
            transform: translateY(-5px);
            border-color: var(--accent-purple);
        }

        .stat-icon-wrapper {
            width: 50px;
            height: 50px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin-bottom: 16px;
        }

        .bg-soft-purple {
            background: rgba(99, 102, 241, 0.15);
            color: var(--accent-purple);
        }

        .bg-soft-green {
            background: rgba(16, 185, 129, 0.15);
            color: var(--accent-green);
        }

        .bg-soft-orange {
            background: rgba(245, 158, 11, 0.15);
            color: var(--accent-orange);
        }

        .bg-soft-blue {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
        }

        .nav-tabs-nexus {
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 24px;
            gap: 10px;
            display: flex;
            flex-wrap: nowrap;
            overflow-x: auto;
            padding-bottom: 2px;
        }

        .nav-tabs-nexus .nav-link {
            background: transparent;
            border: none;
            color: var(--text-muted);
            padding: 10px 20px;
            border-radius: 12px;
            font-weight: 600;
            margin: 0;
            transition: all 0.3s;
            white-space: nowrap;
        }

        .nav-tabs-nexus .nav-link:hover {
            color: var(--accent-purple);
            background: rgba(99, 102, 241, 0.05);
        }

        .nav-tabs-nexus .nav-link.active {
            background: linear-gradient(135deg, #ec4899 0%, #8b5cf6 100%);
            color: white !important;
            box-shadow: 0 4px 10px rgba(236, 72, 153, 0.3);
        }

        .nav-tabs-nexus .nav-link.active i {
            color: white !important;
            background: rgba(255, 255, 255, 0.2) !important;
        }

        .action-bar {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 24px;
            display: flex;
            flex-wrap: wrap;
            gap: 16px;
            align-items: center;
            justify-content: space-between;
        }

        .filter-group {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .form-select-nexus,
        .form-control-nexus {
            background-color: var(--input-bg);
            border: 1px solid var(--border-color);
            color: var(--text-main);
            border-radius: 10px;
            padding: 10px 16px;
            font-size: 0.9rem;
            min-width: 150px;
        }

        .form-select-nexus:focus,
        .form-control-nexus:focus {
            background-color: var(--bg-card);
            border-color: var(--accent-purple);
            color: var(--text-main);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
        }

        .exam-card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 20px;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .exam-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, #ec4899, #8b5cf6);
            opacity: 0;
            transition: opacity 0.3s;
        }

        .exam-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            border-color: var(--accent-purple);
        }

        .exam-card:hover::before {
            opacity: 1;
        }

        .exam-card-body {
            padding: 24px;
            flex-grow: 1;
        }

        .exam-card-footer {
            padding: 16px 24px;
            border-top: 1px solid var(--border-color);
            background: rgba(0, 0, 0, 0.02);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .badge-nexus {
            padding: 6px 12px;
            border-radius: 50px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .badge-nexus.ongoing {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            border: 1px solid rgba(59, 130, 246, 0.3);
        }

        .badge-nexus.finished {
            background: rgba(16, 185, 129, 0.15);
            color: var(--accent-green);
            border: 1px solid rgba(16, 185, 129, 0.3);
        }

        .badge-nexus.pending {
            background: rgba(245, 158, 11, 0.15);
            color: var(--accent-orange);
            border: 1px solid rgba(245, 158, 11, 0.3);
        }

        .exam-meta {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-top: 15px;
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .exam-meta i {
            color: var(--accent-purple);
        }

        .participant-avatars {
            display: flex;
            padding-left: 10px;
        }

        .participant-avatars img {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: 2px solid var(--bg-card);
            margin-left: -10px;
            object-fit: cover;
        }

        .participant-count {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: var(--bg-dark);
            border: 2px solid var(--border-color);
            color: var(--text-muted);
            font-size: 0.7rem;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-left: -10px;
            z-index: 2;
        }

        .table-responsive-nexus {
            background: var(--bg-card);
            border-radius: 20px;
            border: 1px solid var(--border-color);
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .table-nexus {
            width: 100%;
            border-collapse: collapse;
            color: var(--text-main);
            background-color: var(--bg-card) !important;
        }

        .table-nexus th {
            padding: 20px 24px;
            text-align: left;
            font-weight: 700;
            font-size: 0.75rem;
            letter-spacing: 0.05em;
            color: var(--text-muted);
            text-transform: uppercase;
            border-bottom: 1px solid var(--border-color);
            background: rgba(0, 0, 0, 0.2);
            white-space: nowrap;
        }

        body.light-mode .table-nexus th {
            background: rgba(0, 0, 0, 0.03);
        }

        .table-nexus td {
            padding: 20px 24px;
            border-bottom: 1px solid var(--border-color);
            vertical-align: middle;
            font-size: 0.9rem;
            font-weight: 500;
            background-color: transparent !important;
            color: var(--text-main);
        }

        .table-nexus tr:last-child td {
            border-bottom: none;
        }

        .table-nexus tbody tr {
            transition: all 0.2s ease;
        }

        .table-nexus tbody tr:hover {
            background-color: rgba(99, 102, 241, 0.05);
        }

        .table-nexus td .exam-title {
            font-weight: 600;
            color: var(--text-main);
            display: block;
            margin-bottom: 2px;
        }

        .table-nexus td .exam-subtitle {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        .action-btn-group {
            display: flex;
            gap: 8px;
            justify-content: flex-end;
        }

        .grade-input {
            width: 80px;
            padding: 6px 10px;
            background: var(--bg-dark);
            border: 1px solid var(--border-color);
            color: var(--text-main);
            border-radius: 8px;
            text-align: center;
            font-weight: 600;
            transition: all 0.2s;
        }

        .grade-input:focus {
            border-color: var(--accent-purple);
            outline: none;
            box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.2);
            background: var(--bg-card);
        }

        .grade-input.good {
            border-color: var(--accent-green);
            color: var(--accent-green);
        }

        .grade-input.bad {
            border-color: var(--accent-red);
            color: var(--accent-red);
        }

        .btn-nexus-primary {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 12px;
            font-weight: 600;
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
            transition: all 0.3s;
        }

        .btn-nexus-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(99, 102, 241, 0.4);
            color: white;
        }

        .btn-icon-only {
            width: 36px;
            height: 36px;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            color: var(--text-muted);
            background: transparent;
            border: 1px solid var(--border-color);
            transition: all 0.2s;
        }

        .btn-icon-only:hover {
            background: var(--accent-purple);
            color: white;
            border-color: var(--accent-purple);
        }

        /* Responsive Fixes */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-120%);
                width: 260px !important;
                padding-right: 16px;
            }

            .sidebar.active {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
                width: 100%;
                padding: 20px;
            }

            .mobile-menu-btn {
                display: flex;
            }

            .top-navbar-standalone {
                justify-content: flex-end;
                padding-left: 70px;
                margin-bottom: 20px;
                gap: 10px;
            }

            .search-standalone-box {
                width: auto;
                flex-grow: 1;
                max-width: 100%;
            }

            .search-standalone-input {
                padding-left: 40px;
                padding-top: 10px;
                padding-bottom: 10px;
            }

            .search-standalone-icon {
                left: 14px;
            }

            .notification-btn {
                width: 42px;
                height: 42px;
                font-size: 1.1rem;
            }

            .nav-tabs-nexus {
                overflow-x: auto;
                flex-wrap: nowrap;
            }

            .exam-meta {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }
        }
    </style>
</head>

<body id="body-container">

    <button class="mobile-menu-btn" id="mobileMenuBtn"><i class="bi bi-list" style="font-size: 1.5rem;"></i></button>
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <div>
        <!-- SIDEBAR -->
        <nav class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <!-- [MODIFIED] Menggunakan IMG, bukan Icon -->
                <div class="brand-logo">
                    <img src="https://placehold.co/100x100/6366f1/ffffff?text=N" alt="Nexus Logo">
                    <span class="logo-text">Nexus</span>
                </div>
                <!-- [MODIFIED] Tombol Collapse -->
                <div class="sidebar-collapse-btn" id="collapseBtn"><i class="bi bi-chevron-left"></i></div>
            </div>
            <!-- [MODIFIED] Divider lebih tebal -->
            <div class="sidebar-divider"></div>

            <!-- [MODIFIED] NEW CATEGORIZED SIDEBAR STRUCTURE -->
            <div class="nav flex-column flex-nowrap nav-scrollable">
                <div class="nav-category">UTAMA</div>
                <a href="index.html" class="nav-link "><i class="bi bi-grid-1x2-fill"></i>
                    <span>Dashboard</span></a>
                <a href="analytic.html" class="nav-link "><i class="bi bi-graph-up-arrow"></i>
                    <span>Analytics</span></a>

                <a class="nav-link" data-bs-toggle="collapse" href="#menuBusiness">
                    <i class="bi bi-shop"></i>
                    <span>E-Commerce</span> <i class="bi bi-chevron-right arrow-icon"></i>
                </a>
                <div class="collapse" id="menuBusiness">
                    <div class="nav-submenu">

                        <a href="/products.html" class="nav-link "><span>Produk & Stok</span></a>
                        <a href="/orders.html" class="nav-link "><span>Pesanan</span></a>
                        <a href="/customers.html" class="nav-link "><span>Pelanggan (CRM)</span></a>
                        <a href="/pos.html" class="nav-link"><span>Kasir (POS)</span></a>
                    </div>
                </div>
                <!-- SEKTOR FINANSIAL (CRYPTO & PERUSAHAAN) -->
                <div class="nav-category">FINANSIAL & CRYPTO</div>
                <a class="nav-link " data-bs-toggle="collapse" href="#menuFinance"><i class="bi bi-wallet2"></i>
                    <span>Keuangan</span> <i class="bi bi-chevron-right arrow-icon"></i></a>
                <div class="collapse" id="menuFinance">
                    <div class="nav-submenu">
                        <a href="wallet.html" class="nav-link "><span>Dompet Digital</span></a>
                        <a href="transactions.html" class="nav-link "><span>Riwayat Transaksi</span></a>
                        <a href="crypto-market.html" class="nav-link "><span>Crypto Market</span></a>
                        <a href="invoices.html" class="nav-link"><span>Faktur & Tagihan</span></a>
                    </div>
                </div>


                <!-- SEKTOR PENDIDIKAN -->
                <div class="nav-category">PENDIDIKAN</div>
                <a class="nav-link " data-bs-toggle="collapse" href="#menuEdu" ><i
                        class="bi bi-mortarboard"></i>
                    <span>Akademik</span> <i class="bi bi-chevron-right arrow-icon"></i></a>
                <div class="collapse " id="menuEdu">
                    <div class="nav-submenu">
                        <a href="courses.html" class="nav-link "><span>Kelas / Kursus</span></a>
                        <a href="students.html" class="nav-link"><span>Siswa & Pengajar</span></a>
                        <a href="schedule.html" class="nav-link "><span>Jadwal Pelajaran</span></a>
                        <a href="exams.html" class="nav-link"><span>Ujian & Nilai</span></a>
                    </div>
                </div>

                <!-- SEKTOR MASYARAKAT & UMUM -->
                <div class="nav-category">SOSIAL & KOMUNITAS</div>
                <a class="nav-link " data-bs-toggle="collapse" href="#menuSocial" aria-expanded="true"><i class="bi bi-people"></i>
                    <span>Komunitas</span> <i class="bi bi-chevron-right arrow-icon"></i></a>
                <div class="collapse show" id="menuSocial">
                    <div class="nav-submenu">
                        <a href="members.html" class="nav-link active"><span>Data Anggota</span></a>
                        <a href="events.html" class="nav-link"><span>Event & Kegiatan</span></a>
                        <a href="donations.html" class="nav-link"><span>Donasi & Iuran</span></a>
                        <a href="forum.html" class="nav-link"><span>Forum Diskusi</span></a>
                    </div>
                </div>

                <!-- TOOLS & SYSTEM (Generic) -->
                <div class="nav-category">SYSTEM TOOLS</div>

                <a class="nav-link " data-bs-toggle="collapse" href="#menuApps"><i class="bi bi-grid"></i>
                    <span>Aplikasi</span> <i class="bi bi-chevron-right arrow-icon"></i></a>
                <div class="collapse" id="menuApps">
                    <div class="nav-submenu">
                        <a href="email.html" class="nav-link"><span>Email</span></a>
                        <a href="chat.html" class="nav-link"><span>Chat</span></a>
                        <a href="calendar.html" class="nav-link"><span>Calendar</span></a>
                        <a href="file-manager.html" class="nav-link"><span>File Manager</span></a>
                    </div>
                </div>

                <a class="nav-link " data-bs-toggle="collapse" href="#menuUI"><i class="bi bi-layers"></i>
                    <span>UI Components</span> <i class="bi bi-chevron-right arrow-icon"></i></a>
                <div class="collapse" id="menuUI">
                    <div class="nav-submenu">
                        <a href="alerts.html" class="nav-link"><span>Alerts</span></a>
                        <a href="buttons.html" class="nav-link"><span>Buttons</span></a>
                        <a href="cards.html" class="nav-link"><span>Cards & Widgets</span></a>
                        <a href="modals.html" class="nav-link"><span>Modals</span></a>
                        <a href="wizard.html" class="nav-link"><span>Wizard</span></a>
                        <a href="toast-notify.html" class="nav-link"><span>Toast & Notify</span></a>
                    </div>
                </div>

                <a class="nav-link " data-bs-toggle="collapse" href="#menuForms"><i class="bi bi-file-text"></i>
                    <span>Forms & Tables</span> <i class="bi bi-chevron-right arrow-icon"></i></a>
                <div class="collapse" id="menuForms">
                    <div class="nav-submenu">
                        <a href="form.html" class="nav-link"><span>Form Elements</span></a>
                        <a href="table.html" class="nav-link"><span>Data Tables</span></a>
                    </div>
                </div>

                <a class="nav-link " data-bs-toggle="collapse" href="#menuPages"><i class="bi bi-file-lock"></i>
                    <span>Otentikasi</span> <i class="bi bi-chevron-right arrow-icon"></i></a>
                <div class="collapse" id="menuPages">
                    <div class="nav-submenu">

                        <a href="profile.html" class="nav-link" target="_blank"><span>Profile</span></a>
                        <a href="login.html" class="nav-link" target="_blank"><span>Login</span></a>
                        <a href="register.html" class="nav-link" target="_blank"><span>Register</span></a>
                        <a href="reset-password.html" class="nav-link" target="_blank"><span>Reset Password</span></a>
                        <a href="lock-screen.html" class="nav-link" target="_blank"><span>Lock Screen</span></a>
                        <a href="coming-soon.html" class="nav-link" target="_blank"><span>Coming Soon</span></a>
                        <a href="maintenance.html" class="nav-link" target="_blank"><span>Maintenance</span></a>
                        <a href="403.html" class="nav-link" target="_blank"><span>Error 403</span></a>
                        <a href="404.html" class="nav-link" target="_blank"><span>Error 404</span></a>
                        <a href="500.html" class="nav-link" target="_blank"><span>Error 500</span></a>
                        <a href="503.html" class="nav-link" target="_blank"><span>Error 503</span></a>
                        <a href="504.html" class="nav-link" target="_blank"><span>Error 504</span></a>
                        <a href="505.html" class="nav-link" target="_blank"><span>Error 505</span></a>
                        <a href="506.html" class="nav-link" target="_blank"><span>Error 506</span></a>
                        <a href="507.html" class="nav-link" target="_blank"><span>Error 507</span></a>
                    </div>
                </div>

                <!-- [MODIFIED] Menu Pengaturan (Tetap menggunakan struktur detail yang lama) -->
                <a class="nav-link " data-bs-toggle="collapse" href="#menuSettings"><i class="bi bi-gear"></i>
                    <span>Pengaturan</span> <i class="bi bi-chevron-right arrow-icon"></i></a>
                <div class="collapse" id="menuSettings">
                    <div class="nav-submenu">
                        <div class="nav-submenu-label">Platform & Identitas</div>
                        <a href="setting-general.html" class="nav-link"><span>Identitas & SEO</span></a>
                        <a href="setting-appearance.html" class="nav-link"><span>Tampilan & Tema</span></a>
                        <a href="setting-localization.html" class="nav-link"><span>Bahasa & Wilayah</span></a>

                        <div class="nav-submenu-divider"></div>

                        <div class="nav-submenu-label">Bisnis & Keuangan</div>
                        <a href="setting-currency.html" class="nav-link"><span>Mata Uang & Kripto</span></a>
                        <a href="setting-payment.html" class="nav-link"><span>Metode Pembayaran</span></a>
                        <a href="setting-tax.html" class="nav-link"><span>Pajak & Biaya Layanan</span></a>

                        <div class="nav-submenu-divider"></div>

                        <div class="nav-submenu-label">Operasional</div>
                        <a href="setting-schedule.html" class="nav-link"><span>Jam Kerja & Jadwal</span></a>
                        <a href="setting-notification.html" class="nav-link"><span>Notifikasi (WA/Email)</span></a>

                        <div class="nav-submenu-divider"></div>

                        <div class="nav-submenu-label">Sistem</div>
                        <a href="setting-users.html" class="nav-link"><span>Pengguna & Akses</span></a>
                        <a href="setting-api.html" class="nav-link"><span>API & Webhooks</span></a>
                        <a href="setting-logs.html" class="nav-link"><span>System Logs</span></a>
                    </div>
                </div>
            </div>

            <!-- [MODIFIED] MODERN PROFILE MENU -->
            <div class="dropup profile-wrapper">
                <!-- Trigger Button -->
                <!-- [FIX] Added data-bs-display="static" to prevent popping behavior -->
                <div class="user-profile-btn dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false"
                    data-bs-display="static">
                    <div class="avatar-container">
                        <div class="avatar-modern">A</div>
                        <div class="status-dot pulse"></div> <!-- Online Indicator -->
                    </div>
                    <div class="user-info-modern">
                        <div class="user-name-modern">Admin Pusat</div>
                        <div class="user-role-modern">Super Admin</div>
                    </div>
                    <i class="bi bi-chevron-up profile-chevron"></i>
                </div>

                <!-- Modern Dropdown Content -->
                <ul class="dropdown-menu profile-dropdown-menu">
                    <div class="dropdown-header-modern">
                        <div class="menu-label">SIGNED IN AS</div>
                        <div class="menu-user-email">admin@nexus.com</div>
                    </div>

                    <li><a class="profile-menu-item" href="profile-me.html">
                            <div class="item-left"><i class="bi bi-person item-icon"></i> <span>Profile</span></div>
                        </a></li>
                    <li><a class="profile-menu-item" href="edit-profile.html">
                            <div class="item-left"><i class="bi bi-sliders item-icon"></i> <span>Settings</span></div>
                        </a></li>

                    <!-- Functional Dark Mode Switch inside Menu -->
                    <li>
                        <div class="profile-menu-item" style="cursor: default;">
                            <div class="item-left"><i class="bi bi-moon-stars item-icon"></i> <span>Dark Mode</span>
                            </div>
                            <div class="form-check form-switch theme-switch-wrapper mb-0">
                                <input class="form-check-input custom-switch" type="checkbox" id="menuThemeSwitch">
                            </div>
                        </div>
                    </li>

                    <div style="height: 1px; background: rgba(255,255,255,0.08); margin: 6px 0;"></div>

                    <li><a class="profile-menu-item danger-item" href="login.html">
                            <div class="item-left"><i class="bi bi-box-arrow-left item-icon"></i> <span>Sign Out</span>
                            </div>
                        </a></li>
                </ul>
            </div>

        </nav>

        <!-- MAIN CONTENT -->
        <main class="main-content">
            <!-- Navbar -->
            <div class="top-navbar-standalone">
                <div class="search-standalone-box">
                    <i class="bi bi-search search-standalone-icon"></i>
                    <!-- [FIXED] ID ADDED HERE -->
                    <input type="text" id="globalSearch" class="search-standalone-input" placeholder="Cari sesuatu...">
                </div>

                <!-- Notification Bell -->
                <div class="notification-wrapper dropdown">
                    <div class="notification-btn" data-bs-toggle="dropdown" aria-expanded="false"
                        data-bs-display="static">
                        <i class="bi bi-bell"></i>
                        <div class="notification-dot-red"></div>
                    </div>
                    <ul class="dropdown-menu notification-dropdown-menu">
                        <div
                            class="d-flex justify-content-between align-items-center px-3 py-2 border-bottom border-secondary border-opacity-10 mb-2">
                            <h6 class="mb-0 fw-bold text-white">Notifikasi</h6>
                            <span class="badge bg-danger rounded-pill">3 Baru</span>
                        </div>

                        <li><a class="notification-item" href="#">
                                <div class="notif-icon-box bg-soft-danger"><i class="bi bi-exclamation-octagon"></i>
                                </div>
                                <div class="notif-content">
                                    <h6>System Alert</h6>
                                    <p>CPU Usage above 90% detected.</p>
                                    <span class="notif-time">2 mins ago</span>
                                </div>
                            </a></li>

                        <li><a class="notification-item" href="#">
                                <div class="notif-icon-box bg-soft-success"><i class="bi bi-cart-check"></i></div>
                                <div class="notif-content">
                                    <h6>New Order</h6>
                                    <p>Received order #ORD-248 from Budi.</p>
                                    <span class="notif-time">15 mins ago</span>
                                </div>
                            </a></li>

                        <li><a class="notification-item" href="#">
                                <div class="notif-icon-box bg-soft-info"><i class="bi bi-info-circle"></i></div>
                                <div class="notif-content">
                                    <h6>Server Update</h6>
                                    <p>Server scheduled for maintenance.</p>
                                    <span class="notif-time">1 hour ago</span>
                                </div>
                            </a></li>

                        <div class="px-2 pt-2"><button class="btn btn-outline-secondary btn-sm w-100 rounded-pill"
                                style="font-size: 0.75rem;">Tandai Semua Dibaca</button></div>
                    </ul>
                </div>
            </div>




            <!-- START OF CONTENT HERE -->
            <!-- Page Header -->
            <div class="active-page-header">
                <div class="row align-items-center justify-content-between">
                    <div class="col-lg-7 mb-3 mb-lg-0">
                        <h1 class="page-title-large">Exams & Grading</h1>
                        <p class="text-muted mb-0">Kelola jadwal ujian, input nilai, dan analisis performa siswa secara
                            real-time.</p>
                    </div>
                    <div class="col-lg-5 text-lg-end">
                        <div class="d-flex flex-column align-items-lg-end align-items-start gap-3">
                            <span class="badge bg-soft-purple text-uppercase fw-bold px-3 py-2 rounded-pill"><i
                                    class="bi bi-calendar-check me-2"></i>Academic Year 2024/2025</span>
                            <nav class="breadcrumb-modern">
                                <a href="#" class="breadcrumb-item-custom"><i class="bi bi-house-door-fill"></i></a>
                                <i class="bi bi-chevron-right breadcrumb-sep"></i>
                                <span class="breadcrumb-item-custom">Akademik</span>
                                <i class="bi bi-chevron-right breadcrumb-sep"></i>
                                <span class="breadcrumb-item-custom active">Exams</span>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SECTION 1: STATISTICS WIDGETS -->
            <div class="row g-4 mb-4">
                <div class="col-xl-3 col-md-6">
                    <div class="exam-stat-card">
                        <div class="stat-icon-wrapper bg-soft-purple">
                            <i class="bi bi-file-earmark-text"></i>
                        </div>
                        <h6 class="text-muted text-uppercase fw-bold small">Total Exams</h6>
                        <h2 class="fw-bold mb-1">248</h2>
                        <small class="text-success fw-bold"><i class="bi bi-arrow-up-right"></i> +12% this month</small>
                    </div>
                </div>
                <div class="col-xl-3 col-md-6">
                    <div class="exam-stat-card">
                        <div class="stat-icon-wrapper bg-soft-green">
                            <i class="bi bi-people"></i>
                        </div>
                        <h6 class="text-muted text-uppercase fw-bold small">Total Participants</h6>
                        <h2 class="fw-bold mb-1">1,240</h2>
                        <small class="text-muted">Active students enrolled</small>
                    </div>
                </div>
                <div class="col-xl-3 col-md-6">
                    <div class="exam-stat-card">
                        <div class="stat-icon-wrapper bg-soft-blue">
                            <i class="bi bi-bar-chart"></i>
                        </div>
                        <h6 class="text-muted text-uppercase fw-bold small">Avg. Score</h6>
                        <h2 class="fw-bold mb-1">78.5</h2>
                        <small class="text-success fw-bold">+2.1 points increase</small>
                    </div>
                </div>
                <div class="col-xl-3 col-md-6">
                    <div class="exam-stat-card">
                        <div class="stat-icon-wrapper bg-soft-orange">
                            <i class="bi bi-clock-history"></i>
                        </div>
                        <h6 class="text-muted text-uppercase fw-bold small">Ongoing Exams</h6>
                        <h2 class="fw-bold mb-1">5</h2>
                        <small class="text-warning fw-bold">Ends in 2 hours</small>
                    </div>
                </div>
            </div>

            <!-- SECTION 2: MAIN EXAM MANAGEMENT -->
            <div class="row">
                <div class="col-12">
                    <!-- Tabs Navigation -->
                    <ul class="nav nav-tabs-nexus" id="examTabs" role="tablist">
                        <li class="nav-item">
                            <button class="nav-link active" id="list-tab" data-bs-toggle="tab"
                                data-bs-target="#listView" type="button"><i class="bi bi-grid-fill me-2"></i>Active
                                Exams</button>
                        </li>
                        <li class="nav-item">
                            <button class="nav-link" id="grade-tab" data-bs-toggle="tab" data-bs-target="#gradeView"
                                type="button"><i class="bi bi-pencil-square me-2"></i>Input Grades</button>
                        </li>
                        <li class="nav-item">
                            <button class="nav-link" id="analytics-tab" data-bs-toggle="tab"
                                data-bs-target="#analyticsView" type="button"><i
                                    class="bi bi-graph-up me-2"></i>Performance</button>
                        </li>
                    </ul>

                    <!-- Filters & Search Bar -->
                    <div class="action-bar">
                        <div class="filter-group">
                            <select class="form-select-nexus" id="filterCategory">
                                <option value="all">Semua Kategori</option>
                                <option value="uts">UTS</option>
                                <option value="uas">UAS</option>
                                <option value="kuis">Kuis Harian</option>
                            </select>
                            <select class="form-select-nexus" id="filterClass">
                                <option value="all">Semua Kelas</option>
                                <option value="10">Kelas 10</option>
                                <option value="11">Kelas 11</option>
                                <option value="12">Kelas 12</option>
                            </select>
                            <select class="form-select-nexus" id="filterStatus">
                                <option value="all">Status: All</option>
                                <option value="ongoing">Ongoing</option>
                                <option value="finished">Finished</option>
                                <option value="pending">Pending</option>
                            </select>
                        </div>
                        <div class="d-flex gap-2">
                            <button class="btn btn-nexus-primary" data-bs-toggle="modal"
                                data-bs-target="#createExamModal"><i class="bi bi-plus-lg me-2"></i>Buat Ujian
                                Baru</button>
                            <button class="btn btn-outline-secondary btn-icon-only" title="Export Data"
                                onclick="exportData()"><i class="bi bi-download"></i></button>
                        </div>
                    </div>

                    <!-- Tab Content -->
                    <div class="tab-content" id="examTabsContent">

                        <!-- TAB 1: LIST VIEW (Grid & Table Hybrid) -->
                        <div class="tab-pane fade show active" id="listView" role="tabpanel">
                            <!-- Grid of Cards (Filtered Container) -->
                            <div class="row g-4 mb-4" id="examCardsContainer">
                                <!-- Card 1: Ongoing -->
                                <div class="col-xl-4 col-md-6 exam-item" data-category="kuis" data-status="ongoing"
                                    data-class="10">
                                    <div class="exam-card">
                                        <div class="exam-card-body">
                                            <div class="d-flex justify-content-between align-items-start mb-3">
                                                <span class="badge-nexus ongoing">Sedang Berlangsung</span>
                                                <div class="dropdown">
                                                    <button class="btn btn-sm text-muted p-0" type="button"
                                                        data-bs-toggle="dropdown"><i
                                                            class="bi bi-three-dots-vertical"></i></button>
                                                    <ul class="dropdown-menu dropdown-menu-end">
                                                        <li><a class="dropdown-item" href="#">Detail</a></li>
                                                        <li><a class="dropdown-item" href="#">Pause Exam</a></li>
                                                    </ul>
                                                </div>
                                            </div>
                                            <h5 class="fw-bold mb-1">Matematika Wajib - Aljabar</h5>
                                            <p class="text-muted small mb-3">Kelas 10 IPA 1  Semester Genap</p>

                                            <div class="exam-meta">
                                                <span><i class="bi bi-calendar-event me-2"></i>26 Nov 2025</span>
                                                <span><i class="bi bi-clock me-2"></i>90 Menit</span>
                                            </div>
                                            <div class="mt-4 d-flex align-items-center justify-content-between">
                                                <div class="participant-avatars">
                                                    <img src="https://placehold.co/50x50/png" alt="User">
                                                    <img src="https://placehold.co/50x50/png" alt="User">
                                                    <img src="https://placehold.co/50x50/png" alt="User">
                                                    <div class="participant-count">+28</div>
                                                </div>
                                                <button class="btn btn-sm btn-outline-primary rounded-pill px-3"
                                                    data-bs-toggle="modal"
                                                    data-bs-target="#detailModal">Monitor</button>
                                            </div>
                                        </div>
                                        <div class="exam-card-footer">
                                            <small class="text-muted">Progres: <strong>45%</strong> Submitted</small>
                                            <div class="progress" style="width: 100px; height: 6px;">
                                                <div class="progress-bar bg-primary" role="progressbar"
                                                    style="width: 45%"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Card 2: Finished -->
                                <div class="col-xl-4 col-md-6 exam-item" data-category="uts" data-status="finished"
                                    data-class="12">
                                    <div class="exam-card">
                                        <div class="exam-card-body">
                                            <div class="d-flex justify-content-between align-items-start mb-3">
                                                <span class="badge-nexus finished">Selesai</span>
                                                <button class="btn btn-sm text-muted p-0"><i
                                                        class="bi bi-three-dots-vertical"></i></button>
                                            </div>
                                            <h5 class="fw-bold mb-1">Bahasa Inggris - Reading</h5>
                                            <p class="text-muted small mb-3">Kelas 12 IPS 2  Ujian Tengah Semester</p>

                                            <div class="exam-meta">
                                                <span><i class="bi bi-calendar-check me-2"></i>25 Nov 2025</span>
                                                <span><i class="bi bi-check-circle me-2"></i>Finalized</span>
                                            </div>
                                            <div class="mt-4 d-flex align-items-center justify-content-between">
                                                <div class="participant-avatars">
                                                    <img src="https://placehold.co/50x50/png" alt="User">
                                                    <img src="https://placehold.co/50x50/png" alt="User">
                                                    <div class="participant-count">+32</div>
                                                </div>
                                                <button class="btn btn-sm btn-outline-success rounded-pill px-3">Lihat
                                                    Nilai</button>
                                            </div>
                                        </div>
                                        <div class="exam-card-footer">
                                            <small class="text-muted">Rata-rata Kelas: <strong
                                                    class="text-success">85.4</strong></small>
                                        </div>
                                    </div>
                                </div>

                                <!-- Card 3: Pending -->
                                <div class="col-xl-4 col-md-6 exam-item" data-category="kuis" data-status="pending"
                                    data-class="11">
                                    <div class="exam-card">
                                        <div class="exam-card-body">
                                            <div class="d-flex justify-content-between align-items-start mb-3">
                                                <span class="badge-nexus pending">Akan Datang</span>
                                                <button class="btn btn-sm text-muted p-0"><i
                                                        class="bi bi-three-dots-vertical"></i></button>
                                            </div>
                                            <h5 class="fw-bold mb-1">Fisika Dasar - Hukum Newton</h5>
                                            <p class="text-muted small mb-3">Kelas 11 IPA 3  Kuis Mingguan</p>

                                            <div class="exam-meta">
                                                <span><i class="bi bi-calendar-event me-2"></i>28 Nov 2025</span>
                                                <span><i class="bi bi-clock me-2"></i>60 Menit</span>
                                            </div>
                                            <div class="mt-4 d-flex align-items-center justify-content-between">
                                                <div class="text-muted small fst-italic">Soal belum dipublikasikan</div>
                                                <button class="btn btn-sm btn-outline-warning rounded-pill px-3">Edit
                                                    Soal</button>
                                            </div>
                                        </div>
                                        <div class="exam-card-footer">
                                            <small class="text-muted">Status: <strong>Persiapan</strong></small>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Data Table Below Cards -->
                            <div class="d-flex justify-content-between align-items-center mb-3 mt-5">
                                <h5 class="section-title-modern mb-0" style="border:none; margin:0; padding:0;">Riwayat
                                    Ujian Lengkap</h5>
                                <button class="btn btn-sm btn-outline-secondary rounded-pill px-3">View All
                                    History</button>
                            </div>

                            <div class="table-responsive-nexus">
                                <table class="table table-nexus mb-0" id="examHistoryTable">
                                    <thead>
                                        <tr>
                                            <th style="width: 30%;">DETAIL UJIAN</th>
                                            <th style="width: 15%;">KATEGORI</th>
                                            <th style="width: 15%;">TANGGAL</th>
                                            <th style="width: 10%;">PESERTA</th>
                                            <th style="width: 15%;">AVG. SCORE</th>
                                            <th style="width: 15%; text-align:right;">AKSI</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="exam-row" data-search="biologi sel hewan">
                                            <td>
                                                <div class="d-flex align-items-center gap-3">
                                                    <div class="icon-square bg-soft-purple rounded-3 flex-shrink-0"
                                                        style="width:40px;height:40px;font-size:1.1rem;"><i
                                                            class="bi bi-journal-text"></i></div>
                                                    <div class="d-flex flex-column">
                                                        <span class="exam-title">Biologi - Sel Hewan</span>
                                                        <small class="exam-subtitle">Kelas 10 IPA 1  Kode:
                                                            BIO-101</small>
                                                    </div>
                                                </div>
                                            </td>
                                            <td><span
                                                    class="badge bg-secondary bg-opacity-10 text-secondary border border-secondary border-opacity-25 px-2 py-1 rounded">Kuis
                                                    Harian</span></td>
                                            <td><span class="text-muted small fw-bold">20 Nov 2025</span></td>
                                            <td>
                                                <div class="d-flex align-items-center gap-1">
                                                    <i class="bi bi-person text-muted"></i> 30/30
                                                </div>
                                            </td>
                                            <td><span class="text-success fw-bold">88.5</span></td>
                                            <td class="text-end">
                                                <div class="action-btn-group">
                                                    <button class="btn btn-icon-only btn-sm rounded-circle"
                                                        title="Edit"><i class="bi bi-pencil"></i></button>
                                                    <button
                                                        class="btn btn-icon-only btn-sm rounded-circle text-danger border-danger border-opacity-25"
                                                        title="Hapus"><i class="bi bi-trash"></i></button>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr class="exam-row" data-search="matematika integral">
                                            <td>
                                                <div class="d-flex align-items-center gap-3">
                                                    <div class="icon-square bg-soft-blue rounded-3 flex-shrink-0"
                                                        style="width:40px;height:40px;font-size:1.1rem;"><i
                                                            class="bi bi-calculator"></i></div>
                                                    <div class="d-flex flex-column">
                                                        <span class="exam-title">Matematika - Integral</span>
                                                        <small class="exam-subtitle">Kelas 12 IPA 2  Kode:
                                                            MAT-202</small>
                                                    </div>
                                                </div>
                                            </td>
                                            <td><span
                                                    class="badge bg-primary bg-opacity-10 text-primary border border-primary border-opacity-25 px-2 py-1 rounded">UAS</span>
                                            </td>
                                            <td><span class="text-muted small fw-bold">18 Nov 2025</span></td>
                                            <td>
                                                <div class="d-flex align-items-center gap-1">
                                                    <i class="bi bi-person text-muted"></i> 35/35
                                                </div>
                                            </td>
                                            <td><span class="text-warning fw-bold">65.2</span></td>
                                            <td class="text-end">
                                                <div class="action-btn-group">
                                                    <button class="btn btn-icon-only btn-sm rounded-circle"
                                                        title="Edit"><i class="bi bi-pencil"></i></button>
                                                    <button
                                                        class="btn btn-icon-only btn-sm rounded-circle text-danger border-danger border-opacity-25"
                                                        title="Hapus"><i class="bi bi-trash"></i></button>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr class="exam-row" data-search="sejarah indonesia">
                                            <td>
                                                <div class="d-flex align-items-center gap-3">
                                                    <div class="icon-square bg-soft-orange rounded-3 flex-shrink-0"
                                                        style="width:40px;height:40px;font-size:1.1rem;"><i
                                                            class="bi bi-hourglass-split"></i></div>
                                                    <div class="d-flex flex-column">
                                                        <span class="exam-title">Sejarah - Perang Dunia II</span>
                                                        <small class="exam-subtitle">Kelas 11 IPS 1  Kode:
                                                            HIS-303</small>
                                                    </div>
                                                </div>
                                            </td>
                                            <td><span
                                                    class="badge bg-warning bg-opacity-10 text-warning border border-warning border-opacity-25 px-2 py-1 rounded">UTS</span>
                                            </td>
                                            <td><span class="text-muted small fw-bold">15 Nov 2025</span></td>
                                            <td>
                                                <div class="d-flex align-items-center gap-1">
                                                    <i class="bi bi-person text-muted"></i> 28/30
                                                </div>
                                            </td>
                                            <td><span class="text-success fw-bold">82.0</span></td>
                                            <td class="text-end">
                                                <div class="action-btn-group">
                                                    <button class="btn btn-icon-only btn-sm rounded-circle"
                                                        title="Edit"><i class="bi bi-pencil"></i></button>
                                                    <button
                                                        class="btn btn-icon-only btn-sm rounded-circle text-danger border-danger border-opacity-25"
                                                        title="Hapus"><i class="bi bi-trash"></i></button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <!-- Pagination -->
                            <div class="d-flex justify-content-between align-items-center mt-3">
                                <span class="text-muted small">Showing 1 to 5 of 24 entries</span>
                                <nav>
                                    <ul class="pagination pagination-sm mb-0 gap-1">
                                        <li class="page-item disabled"><a
                                                class="page-link rounded-2 bg-transparent border text-muted"
                                                href="#">Prev</a></li>
                                        <li class="page-item active"><a
                                                class="page-link rounded-2 bg-primary border-primary text-white"
                                                href="#">1</a></li>
                                        <li class="page-item"><a
                                                class="page-link rounded-2 bg-transparent border text-muted"
                                                href="#">2</a></li>
                                        <li class="page-item"><a
                                                class="page-link rounded-2 bg-transparent border text-muted"
                                                href="#">Next</a></li>
                                    </ul>
                                </nav>
                            </div>
                        </div>

                        <!-- TAB 2: INPUT GRADES (Spreadsheet Style) -->
                        <div class="tab-pane fade" id="gradeView" role="tabpanel">
                            <div class="row">
                                <div class="col-md-3">
                                    <!-- Sidebar Selection for Input -->
                                    <div
                                        class="bg-card border border-secondary border-opacity-25 h-100 rounded-4 overflow-hidden">
                                        <div class="p-3">
                                            <h6 class="text-uppercase text-muted fw-bold small mb-3">Pilih Ujian</h6>
                                            <div class="list-group list-group-flush">
                                                <button
                                                    class="list-group-item list-group-item-action active rounded mb-1">
                                                    <div class="d-flex justify-content-between w-100">
                                                        <h6 class="mb-1">Matematika Aljabar</h6>
                                                        <small class="opacity-75">10 IPA 1</small>
                                                    </div>
                                                    <small class="opacity-75">Input Pending</small>
                                                </button>
                                                <button class="list-group-item list-group-item-action rounded mb-1">
                                                    <div class="d-flex justify-content-between w-100">
                                                        <h6 class="mb-1">Bahasa Indonesia</h6>
                                                        <small class="text-muted">11 IPS 2</small>
                                                    </div>
                                                    <small class="text-muted">Completed</small>
                                                </button>
                                                <button class="list-group-item list-group-item-action rounded mb-1">
                                                    <div class="d-flex justify-content-between w-100">
                                                        <h6 class="mb-1">Fisika Dasar</h6>
                                                        <small class="text-muted">10 IPA 2</small>
                                                    </div>
                                                    <small class="text-muted">Draft</small>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-9">
                                    <div
                                        class="bg-card border border-secondary border-opacity-25 rounded-4 overflow-hidden">
                                        <div
                                            class="card-header bg-transparent border-bottom border-secondary border-opacity-25 d-flex justify-content-between align-items-center py-3 px-4">
                                            <h5 class="mb-0 fw-bold">Input Nilai: Matematika Aljabar</h5>
                                            <div class="d-flex gap-2">
                                                <button class="btn btn-sm btn-outline-secondary"><i
                                                        class="bi bi-upload me-1"></i> Import Excel</button>
                                                <button class="btn btn-sm btn-success" onclick="saveGrades()"><i
                                                        class="bi bi-save me-1"></i> Simpan Nilai</button>
                                            </div>
                                        </div>
                                        <div class="card-body p-0">
                                            <div class="table-responsive">
                                                <table class="table table-nexus mb-0 align-middle">
                                                    <thead>
                                                        <tr>
                                                            <th style="width: 50px;">#</th>
                                                            <th>Nama Siswa</th>
                                                            <th>NIS</th>
                                                            <th class="text-center">Kehadiran</th>
                                                            <th class="text-center">Nilai (0-100)</th>
                                                            <th>Keterangan</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr>
                                                            <td>1</td>
                                                            <td>
                                                                <div class="d-flex align-items-center gap-2">
                                                                    <div class="avatar-modern"
                                                                        style="width:32px;height:32px;font-size:0.8rem;">
                                                                        AD</div>
                                                                    <span>Adi Nugroho</span>
                                                                </div>
                                                            </td>
                                                            <td>102938</td>
                                                            <td class="text-center"><span
                                                                    class="badge bg-success rounded-pill">Hadir</span>
                                                            </td>
                                                            <td class="text-center"><input type="number"
                                                                    class="grade-input good" value="85"
                                                                    onkeyup="updateGradeStatus(this)"></td>
                                                            <td><span
                                                                    class="grade-status text-success small fw-bold">Lulus</span>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>2</td>
                                                            <td>
                                                                <div class="d-flex align-items-center gap-2">
                                                                    <div class="avatar-modern"
                                                                        style="width:32px;height:32px;font-size:0.8rem;background:var(--accent-orange);">
                                                                        BS</div>
                                                                    <span>Budi Santoso</span>
                                                                </div>
                                                            </td>
                                                            <td>102939</td>
                                                            <td class="text-center"><span
                                                                    class="badge bg-success rounded-pill">Hadir</span>
                                                            </td>
                                                            <td class="text-center"><input type="number"
                                                                    class="grade-input" value="70"
                                                                    onkeyup="updateGradeStatus(this)"></td>
                                                            <td><span
                                                                    class="grade-status text-muted small fw-bold">Cukup</span>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>3</td>
                                                            <td>
                                                                <div class="d-flex align-items-center gap-2">
                                                                    <div class="avatar-modern"
                                                                        style="width:32px;height:32px;font-size:0.8rem;background:var(--accent-red);">
                                                                        CM</div>
                                                                    <span>Citra Maharani</span>
                                                                </div>
                                                            </td>
                                                            <td>102940</td>
                                                            <td class="text-center"><span
                                                                    class="badge bg-danger rounded-pill">Sakit</span>
                                                            </td>
                                                            <td class="text-center"><input type="number"
                                                                    class="grade-input" disabled value="0"></td>
                                                            <td><span
                                                                    class="grade-status text-danger small fw-bold">Remedial</span>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>4</td>
                                                            <td>
                                                                <div class="d-flex align-items-center gap-2">
                                                                    <div class="avatar-modern"
                                                                        style="width:32px;height:32px;font-size:0.8rem;">
                                                                        DN</div>
                                                                    <span>Doni Pratama</span>
                                                                </div>
                                                            </td>
                                                            <td>102941</td>
                                                            <td class="text-center"><span
                                                                    class="badge bg-success rounded-pill">Hadir</span>
                                                            </td>
                                                            <td class="text-center"><input type="number"
                                                                    class="grade-input bad" value="45"
                                                                    onkeyup="updateGradeStatus(this)"></td>
                                                            <td><span
                                                                    class="grade-status text-danger small fw-bold">Remedial</span>
                                                            </td>
                                                        </tr>
                                                        <!-- More rows to simulate full class -->
                                                        <tr>
                                                            <td>5</td>
                                                            <td>
                                                                <div class="d-flex align-items-center gap-2">
                                                                    <div class="avatar-modern"
                                                                        style="width:32px;height:32px;font-size:0.8rem;background:var(--accent-info);">
                                                                        EK</div>
                                                                    <span>Eka Saputra</span>
                                                                </div>
                                                            </td>
                                                            <td>102942</td>
                                                            <td class="text-center"><span
                                                                    class="badge bg-success rounded-pill">Hadir</span>
                                                            </td>
                                                            <td class="text-center"><input type="number"
                                                                    class="grade-input good" value="92"
                                                                    onkeyup="updateGradeStatus(this)"></td>
                                                            <td><span
                                                                    class="grade-status text-success small fw-bold">Lulus</span>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- TAB 3: ANALYTICS (Charts) -->
                        <div class="tab-pane fade" id="analyticsView" role="tabpanel">
                            <div class="row g-4">
                                <!-- Chart: Grade Distribution -->
                                <div class="col-lg-8">
                                    <div class="widget-card h-100">
                                        <div class="d-flex justify-content-between align-items-center mb-4">
                                            <h5 class="fw-bold mb-0">Distribusi Nilai Siswa</h5>
                                            <select
                                                class="form-select form-select-sm bg-transparent text-muted border-secondary w-auto">
                                                <option>Semester Ini</option>
                                                <option>Tahun Lalu</option>
                                            </select>
                                        </div>
                                        <div id="gradeDistributionChart" style="min-height: 300px;"></div>
                                    </div>
                                </div>

                                <!-- Top Students List -->
                                <div class="col-lg-4">
                                    <div class="widget-card h-100">
                                        <h5 class="fw-bold mb-4">Top 5 Siswa Terbaik</h5>
                                        <div class="d-flex flex-column gap-3">
                                            <!-- Student Item -->
                                            <div
                                                class="d-flex align-items-center justify-content-between p-2 rounded hover-bg-light">
                                                <div class="d-flex align-items-center gap-3">
                                                    <div class="position-relative">
                                                        <div class="avatar-modern">1</div>
                                                        <span
                                                            class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-warning"><i
                                                                class="bi bi-trophy-fill"></i></span>
                                                    </div>
                                                    <div>
                                                        <h6 class="mb-0 fw-bold">Sarah Amalia</h6>
                                                        <small class="text-muted">12 IPA 1</small>
                                                    </div>
                                                </div>
                                                <div class="text-end">
                                                    <h6 class="mb-0 fw-bold text-primary">98.5</h6>
                                                    <small class="text-muted">Avg</small>
                                                </div>
                                            </div>

                                            <div
                                                class="d-flex align-items-center justify-content-between p-2 rounded hover-bg-light">
                                                <div class="d-flex align-items-center gap-3">
                                                    <div class="avatar-modern bg-secondary bg-opacity-25 text-white">2
                                                    </div>
                                                    <div>
                                                        <h6 class="mb-0 fw-bold">Rizky Ramadhan</h6>
                                                        <small class="text-muted">12 IPA 1</small>
                                                    </div>
                                                </div>
                                                <div class="text-end">
                                                    <h6 class="mb-0 fw-bold text-primary">96.2</h6>
                                                    <small class="text-muted">Avg</small>
                                                </div>
                                            </div>

                                            <div
                                                class="d-flex align-items-center justify-content-between p-2 rounded hover-bg-light">
                                                <div class="d-flex align-items-center gap-3">
                                                    <div class="avatar-modern bg-secondary bg-opacity-25 text-white">3
                                                    </div>
                                                    <div>
                                                        <h6 class="mb-0 fw-bold">Dewi Sartika</h6>
                                                        <small class="text-muted">12 IPS 2</small>
                                                    </div>
                                                </div>
                                                <div class="text-end">
                                                    <h6 class="mb-0 fw-bold text-primary">95.0</h6>
                                                    <small class="text-muted">Avg</small>
                                                </div>
                                            </div>
                                        </div>
                                        <button class="btn btn-outline-secondary w-100 mt-4 rounded-pill">Lihat Ranking
                                            Lengkap</button>
                                    </div>
                                </div>

                                <!-- Pass/Fail Ratio -->
                                <div class="col-md-6">
                                    <div class="widget-card">
                                        <h5 class="fw-bold mb-4">Rasio Kelulusan</h5>
                                        <div class="d-flex align-items-center">
                                            <div id="passFailChart" style="min-height: 250px; width: 100%;"></div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <div class="widget-card">
                                        <h5 class="fw-bold mb-4">Mata Pelajaran Ter-sulit</h5>
                                        <div class="d-flex flex-column gap-3">
                                            <div>
                                                <div class="d-flex justify-content-between mb-1">
                                                    <small>Fisika Kuantum</small>
                                                    <small class="text-danger">Avg: 55.0</small>
                                                </div>
                                                <div class="progress" style="height: 6px;">
                                                    <div class="progress-bar bg-danger" role="progressbar"
                                                        style="width: 55%"></div>
                                                </div>
                                            </div>
                                            <div>
                                                <div class="d-flex justify-content-between mb-1">
                                                    <small>Matematika Lanjut</small>
                                                    <small class="text-warning">Avg: 62.5</small>
                                                </div>
                                                <div class="progress" style="height: 6px;">
                                                    <div class="progress-bar bg-warning" role="progressbar"
                                                        style="width: 62%"></div>
                                                </div>
                                            </div>
                                            <div>
                                                <div class="d-flex justify-content-between mb-1">
                                                    <small>Kimia Organik</small>
                                                    <small class="text-info">Avg: 68.0</small>
                                                </div>
                                                <div class="progress" style="height: 6px;">
                                                    <div class="progress-bar bg-info" role="progressbar"
                                                        style="width: 68%"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- END OF CONTENT HERE -->


            <!-- START OF COPYRIGHT FOOTER SECTION -->
            <footer class=" footer-dashboard">
                <div class="row align-items-center justify-content-between">
                    <div class="col-md-6 text-center text-md-start mb-2 mb-md-0">
                        <p class="mb-0 small text-muted">Copyright &copy; 2025
                            <strong class="text-white">Nexus
                                Admin</strong>. All rights reserved.
                        </p>
                    </div>
                    <div class="col-md-6 text-center text-md-end">
                        <div class="d-flex justify-content-center justify-content-md-end gap-3">
                            <a href="#" class="footer-link">Kebijakan
                                Privasi</a>
                            <a href="#" class="footer-link">Syarat &
                                Ketentuan</a>
                            <a href="#" class="footer-link">Bantuan</a>
                        </div>
                    </div>
                </div>
            </footer>
            <!-- END OF COPYRIGHT FOOTER -->
        </main>
    </div>

    <!-- Theme Toggle Floating (Maintained) -->
    <div class="floating-btn" id="themeToggle"><i class="bi bi-moon-fill" id="themeIcon"></i></div>

    <!-- MODALS (Hidden by default) -->
    <div class="modal fade" id="createExamModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content bg-card text-main border border-secondary border-opacity-25 shadow-lg">
                <div class="modal-header border-bottom border-secondary border-opacity-25">
                    <h5 class="modal-title fw-bold">Buat Ujian Baru</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <div class="modal-body p-4">
                    <form>
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label class="form-label text-muted small text-uppercase fw-bold">Nama Ujian</label>
                                <input type="text" class="form-control form-control-nexus"
                                    placeholder="Contoh: UTS Matematika">
                            </div>
                            <div class="col-md-6">
                                <label class="form-label text-muted small text-uppercase fw-bold">Mata Pelajaran</label>
                                <select class="form-select form-select-nexus">
                                    <option>Pilih Mata Pelajaran...</option>
                                    <option>Matematika</option>
                                    <option>Fisika</option>
                                    <option>Bahasa Inggris</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label text-muted small text-uppercase fw-bold">Kelas</label>
                                <select class="form-select form-select-nexus">
                                    <option>10 IPA 1</option>
                                    <option>10 IPA 2</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label text-muted small text-uppercase fw-bold">Tanggal</label>
                                <input type="date" class="form-control form-control-nexus">
                            </div>
                            <div class="col-md-4">
                                <label class="form-label text-muted small text-uppercase fw-bold">Durasi (Menit)</label>
                                <input type="number" class="form-control form-control-nexus" value="60">
                            </div>
                            <div class="col-12">
                                <label class="form-label text-muted small text-uppercase fw-bold">Deskripsi /
                                    Instruksi</label>
                                <textarea class="form-control form-control-nexus" rows="3"></textarea>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer border-top border-secondary border-opacity-25">
                    <button type="button" class="btn btn-outline-secondary rounded-pill"
                        data-bs-dismiss="modal">Batal</button>
                    <button type="button" class="btn btn-nexus-primary rounded-pill px-4">Buat Jadwal</button>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL: EXAM DETAIL (MONITORING) -->
    <div class="modal fade" id="detailModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-xl modal-dialog-centered">
            <div class="modal-content bg-card text-main border border-secondary border-opacity-25 shadow-lg">
                <div class="modal-header border-bottom border-secondary border-opacity-25 bg-gradient-header">
                    <div>
                        <h5 class="modal-title fw-bold">Monitoring: Matematika Wajib</h5>
                        <small class="text-muted"><i class="bi bi-circle-fill text-success small me-1"></i> Live
                            Session</small>
                    </div>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <div class="modal-body p-0">
                    <div class="row g-0">
                        <div class="col-md-8 p-4 border-end border-secondary border-opacity-25">
                            <h6 class="mb-3 text-uppercase fw-bold text-muted small">Peserta (30 Online)</h6>
                            <div class="d-flex flex-wrap gap-2">
                                <div class="position-relative" title="Adi - Mengerjakan">
                                    <div class="avatar-modern bg-success text-white" style="width:40px;height:40px;">AD
                                    </div>
                                    <span
                                        class="position-absolute bottom-0 end-0 p-1 bg-success border border-dark rounded-circle"></span>
                                </div>
                                <div class="position-relative" title="Budi - Mengerjakan">
                                    <div class="avatar-modern bg-success text-white" style="width:40px;height:40px;">BS
                                    </div>
                                    <span
                                        class="position-absolute bottom-0 end-0 p-1 bg-success border border-dark rounded-circle"></span>
                                </div>
                                <div class="position-relative" title="Citra - Idle">
                                    <div class="avatar-modern bg-warning text-dark" style="width:40px;height:40px;">CM
                                    </div>
                                    <span
                                        class="position-absolute bottom-0 end-0 p-1 bg-warning border border-dark rounded-circle"></span>
                                </div>
                                <div class="avatar-modern bg-secondary text-white opacity-50"
                                    style="width:40px;height:40px;">+25</div>
                            </div>

                            <div class="mt-4">
                                <h6 class="mb-3 text-uppercase fw-bold text-muted small">Progress Pengerjaan</h6>
                                <div class="progress" style="height: 15px;">
                                    <div class="progress-bar bg-success" role="progressbar" style="width: 20%"
                                        title="Selesai">20%</div>
                                    <div class="progress-bar bg-primary progress-bar-striped progress-bar-animated"
                                        role="progressbar" style="width: 60%" title="Sedang Mengerjakan">60%</div>
                                    <div class="progress-bar bg-secondary" role="progressbar" style="width: 20%"
                                        title="Belum Mulai">20%</div>
                                </div>
                                <div class="d-flex justify-content-between mt-2 small text-muted">
                                    <span>Selesai: 6 Siswa</span>
                                    <span>Aktif: 18 Siswa</span>
                                    <span>Belum: 6 Siswa</span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 p-4 bg-dark bg-opacity-25">
                            <h6 class="mb-3 text-uppercase fw-bold text-muted small">Log Aktivitas</h6>
                            <div class="d-flex flex-column gap-3 small" style="max-height: 300px; overflow-y: auto;">
                                <div class="d-flex gap-2">
                                    <span class="text-muted">10:05</span>
                                    <span><strong>Adi</strong> menyelesaikan ujian.</span>
                                </div>
                                <div class="d-flex gap-2">
                                    <span class="text-muted">10:02</span>
                                    <span class="text-warning"><strong>Citra</strong> terdeteksi membuka tab
                                        baru.</span>
                                </div>
                                <div class="d-flex gap-2">
                                    <span class="text-muted">09:55</span>
                                    <span><strong>Budi</strong> memulai ujian.</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer border-top border-secondary border-opacity-25">
                    <button class="btn btn-outline-danger btn-sm rounded-pill"><i class="bi bi-stop-circle me-1"></i>
                        Hentikan Sesi</button>
                    <button class="btn btn-nexus-primary btn-sm rounded-pill" data-bs-dismiss="modal">Tutup
                        Monitoring</button>
                </div>
            </div>
        </div>
    </div>

    <!-- TOAST NOTIFICATION -->
    <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 1100">
        <div id="liveToast" class="toast bg-card text-main border-secondary border-opacity-25" role="alert"
            aria-live="assertive" aria-atomic="true">
            <div class="toast-header bg-card text-main border-bottom border-secondary border-opacity-25">
                <i class="bi bi-check-circle-fill text-success me-2"></i>
                <strong class="me-auto">System Notification</strong>
                <small>Just now</small>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast"
                    aria-label="Close"></button>
            </div>
            <div class="toast-body">
                Data nilai berhasil disimpan ke server.
            </div>
        </div>
    </div>
    <!-- JS Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        /* ======================================================================
                      GLOBAL JS (SIDEBAR, THEME, MOBILE MENU)
        ====================================================================== */
        const body = document.body;
        const sidebar = document.getElementById("sidebar");
        const collapseBtn = document.getElementById("collapseBtn");
        const themeToggle = document.getElementById("themeToggle");
        const themeIcon = document.getElementById("themeIcon");
        const menuThemeSwitch = document.getElementById("menuThemeSwitch");
        const mobileBtn = document.getElementById("mobileMenuBtn");
        const overlay = document.getElementById("sidebarOverlay");

        // --- CHARTS VARIABLES (Declared globally) ---
        let gradeChart, passFailChart;

        function updateChartsTheme(isLight) {
            const textColor = isLight ? '#1f2937' : '#9ca3af';
            const gridColor = isLight ? 'rgba(0,0,0,0.05)' : 'rgba(255,255,255,0.05)';

            // Update Grade Distribution Chart
            if (gradeChart) {
                gradeChart.updateOptions({
                    chart: { foreColor: textColor },
                    grid: { borderColor: gridColor },
                    theme: { mode: isLight ? 'light' : 'dark' }
                });
            }

            // Update Pass/Fail Chart
            if (passFailChart) {
                passFailChart.updateOptions({
                    chart: { foreColor: textColor },
                    stroke: { colors: [isLight ? '#ffffff' : '#1f2937'] } // Border donut
                });
            }
        }

        // Function to handle Theme Change
        function toggleTheme() {
            body.classList.toggle("light-mode");
            const isLight = body.classList.contains("light-mode");

            // Update Icons
            if (themeIcon) themeIcon.classList.replace(isLight ? "bi-moon-fill" : "bi-sun-fill", isLight ? "bi-sun-fill" : "bi-moon-fill");

            // Update Local Storage
            localStorage.setItem("nexus_theme", isLight ? "light" : "dark");

            // Sync Checkbox state (if toggled via floating btn)
            if (menuThemeSwitch) menuThemeSwitch.checked = !isLight; // Dark mode = checked

            // Update Charts if they exist
            updateChartsTheme(isLight);
        }

        // Initial Theme Load
        if (localStorage.getItem("nexus_theme") === "light") {
            body.classList.add("light-mode");
            if (themeIcon) themeIcon.classList.replace("bi-moon-fill", "bi-sun-fill");
            if (menuThemeSwitch) menuThemeSwitch.checked = false;
        } else {
            if (menuThemeSwitch) menuThemeSwitch.checked = true; // Default Dark
        }

        // Event Listeners
        if (themeToggle) themeToggle.addEventListener("click", toggleTheme);

        if (menuThemeSwitch) {
            menuThemeSwitch.addEventListener("change", () => {
                if (menuThemeSwitch.checked) {
                    if (body.classList.contains("light-mode")) toggleTheme();
                } else {
                    if (!body.classList.contains("light-mode")) toggleTheme();
                }
            });
        }

        // [MODIFIED] Sidebar & Mobile Logic
        function closeMobileMenu() {
            sidebar.classList.remove("active");
            if (overlay) overlay.classList.remove("show");
        }

        function toggleMobileMenu() {
            sidebar.classList.toggle("active");
            if (overlay) overlay.classList.toggle("show");
        }

        if (collapseBtn) {
            collapseBtn.addEventListener("click", () => {
                if (window.innerWidth <= 768) {
                    closeMobileMenu();
                } else {
                    sidebar.classList.toggle("collapsed");
                    body.classList.toggle("sidebar-collapsed");
                }
            });
        }

        if (mobileBtn) mobileBtn.addEventListener("click", toggleMobileMenu);
        if (overlay) overlay.addEventListener("click", closeMobileMenu);


        /* ======================================================================
           LOGIC: EXAM PAGE FUNCTIONALITY
           ====================================================================== */

        // 1. FILTER & SEARCH LOGIC
        const filterCategory = document.getElementById('filterCategory');
        const filterClass = document.getElementById('filterClass');
        const filterStatus = document.getElementById('filterStatus');
        const globalSearch = document.getElementById('globalSearch'); // [FIXED] This element ID now exists
        const examItems = document.querySelectorAll('.exam-item');
        const tableRows = document.querySelectorAll('#examHistoryTable tbody tr');

        function filterExams() {
            const category = filterCategory.value;
            const cls = filterClass.value;
            const status = filterStatus.value;
            // Safe check if search exists
            const searchTerm = globalSearch ? globalSearch.value.toLowerCase() : "";

            // Filter Cards
            examItems.forEach(item => {
                const itemCat = item.getAttribute('data-category');
                const itemStatus = item.getAttribute('data-status');
                const itemClass = item.getAttribute('data-class');
                const text = item.innerText.toLowerCase();

                const matchCategory = category === 'all' || itemCat === category;
                const matchStatus = status === 'all' || itemStatus === status;
                const matchClass = cls === 'all' || itemClass === cls;
                const matchSearch = text.includes(searchTerm);

                if (matchCategory && matchStatus && matchClass && matchSearch) {
                    item.style.display = 'block';
                } else {
                    item.style.display = 'none';
                }
            });

            // Filter Table (Search Only for simplicity in this demo)
            tableRows.forEach(row => {
                const text = row.getAttribute('data-search') || row.innerText.toLowerCase();
                if (text.includes(searchTerm)) {
                    row.style.display = 'table-row';
                } else {
                    row.style.display = 'none';
                }
            });
        }

        // Attach Listeners
        if (filterCategory) filterCategory.addEventListener('change', filterExams);
        if (filterClass) filterClass.addEventListener('change', filterExams);
        if (filterStatus) filterStatus.addEventListener('change', filterExams);
        if (globalSearch) globalSearch.addEventListener('input', filterExams);

        // 2. EXPORT DATA MOCK
        function exportData() {
            const toastEl = document.getElementById('liveToast');
            const toast = new bootstrap.Toast(toastEl);
            toastEl.querySelector('.toast-body').innerText = "Sedang menyiapkan file Excel...";
            toast.show();

            setTimeout(() => {
                toastEl.querySelector('.toast-body').innerText = "Berhasil! File 'Exam_Report_2025.xlsx' telah diunduh.";
                toast.show();
            }, 1500);
        }

        // 3. AUTO GRADE STATUS UPDATE
        function updateGradeStatus(input) {
            const val = parseInt(input.value);
            const row = input.closest('tr');
            const statusSpan = row.querySelector('.grade-status');

            input.classList.remove('good', 'bad');
            statusSpan.className = 'grade-status small fw-bold';

            if (isNaN(val)) {
                statusSpan.textContent = "-";
                statusSpan.classList.add('text-muted');
                return;
            }

            if (val >= 75) {
                input.classList.add('good');
                statusSpan.textContent = "Lulus";
                statusSpan.classList.add('text-success');
            } else {
                input.classList.add('bad');
                statusSpan.textContent = "Remedial";
                statusSpan.classList.add('text-danger');
            }
        }

        // 4. SAVE GRADES SIMULATION
        function saveGrades() {
            const toastEl = document.getElementById('liveToast');
            const toast = new bootstrap.Toast(toastEl);
            toastEl.querySelector('.toast-body').innerText = "Nilai berhasil disimpan ke database.";
            toast.show();
        }


        /* ======================================================================
           LOGIC: ANALYTICS (ApexCharts)
           ====================================================================== */
        document.addEventListener('DOMContentLoaded', function () {
            const isLight = body.classList.contains("light-mode");
            const textColor = isLight ? '#1f2937' : '#9ca3af';
            const gridColor = isLight ? 'rgba(0,0,0,0.05)' : 'rgba(255,255,255,0.05)';

            // 1. GRADE DISTRIBUTION CHART (Line Area)
            var optionsGrade = {
                series: [{
                    name: 'Rata-rata Kelas',
                    data: [65, 72, 68, 85, 78, 90, 88]
                }, {
                    name: 'Nilai Tertinggi',
                    data: [88, 92, 85, 98, 95, 100, 96]
                }],
                chart: {
                    type: 'area',
                    height: 300,
                    toolbar: { show: false },
                    fontFamily: 'Inter, sans-serif',
                    background: 'transparent',
                    foreColor: textColor
                },
                colors: ['#6366f1', '#10b981'],
                dataLabels: { enabled: false },
                stroke: { curve: 'smooth', width: 2 },
                fill: {
                    type: 'gradient',
                    gradient: {
                        shadeIntensity: 1,
                        opacityFrom: 0.4,
                        opacityTo: 0.05,
                        stops: [0, 90, 100]
                    }
                },
                xaxis: {
                    categories: ['Ujian 1', 'Ujian 2', 'UTS', 'Ujian 3', 'Ujian 4', 'Ujian 5', 'UAS'],
                    axisBorder: { show: false },
                    axisTicks: { show: false }
                },
                grid: {
                    borderColor: gridColor,
                    strokeDashArray: 4,
                },
                tooltip: { theme: 'dark' }
            };

            const chartEl1 = document.querySelector("#gradeDistributionChart");
            if (chartEl1) {
                gradeChart = new ApexCharts(chartEl1, optionsGrade);
                gradeChart.render();
            }


            // 2. PASS/FAIL RATIO (Donut)
            var optionsPassFail = {
                series: [85, 15],
                labels: ['Lulus', 'Remedial'],
                chart: {
                    type: 'donut',
                    height: 250,
                    fontFamily: 'Inter, sans-serif',
                    background: 'transparent',
                },
                colors: ['#10b981', '#ef4444'],
                plotOptions: {
                    pie: {
                        donut: {
                            size: '70%',
                            labels: {
                                show: true,
                                total: {
                                    show: true,
                                    label: 'Total',
                                    formatter: function (w) {
                                        return w.globals.seriesTotals.reduce((a, b) => a + b, 0) + "%"
                                    },
                                    color: textColor
                                },
                                value: { color: textColor }
                            }
                        }
                    }
                },
                stroke: { colors: [isLight ? '#ffffff' : '#1f2937'] },
                dataLabels: { enabled: false },
                legend: { position: 'bottom', labels: { colors: textColor } }
            };

            const chartEl2 = document.querySelector("#passFailChart");
            if (chartEl2) {
                passFailChart = new ApexCharts(chartEl2, optionsPassFail);
                passFailChart.render();
            }

            // Tab Reflow Fix for Charts
            // ApexCharts kadang tidak render width 100% jika di dalam hidden tab
            const analyticsTabBtn = document.getElementById('analytics-tab');
            if (analyticsTabBtn) {
                analyticsTabBtn.addEventListener('shown.bs.tab', function (event) {
                    if (gradeChart) gradeChart.updateOptions({});
                    if (passFailChart) passFailChart.updateOptions({});
                });
            }
        });
    </script>
</body>

</html>